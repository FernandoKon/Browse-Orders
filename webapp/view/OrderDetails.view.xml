<mvc:xml controllerName="com.lab2dev.browseorders.controller.OrderDetails" 
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"    
    xmlns:f="sap.f"
    xmlns:layout="sap.ui.layout"
    xmlns="sap.m"
    xmlns:ff="sap.ui.layout.form"   
    xmlns:core="sap.ui.core"
    height="100%">
    
    <f:DynamicPage id="OrderDetailPage">
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <Title text="Order {orders>/OrderID}"/>
                </f:heading>
            </f:DynamicPageTitle>
        </f:title>

        <f:header>
            <f:DynamicPageHeader pinnable="false">
                <layout:HorizontalLayout allowWrapping="true">

                    <layout:VerticalLayout class="sapUiMediumMarginEnd">
                        <ObjectAttribute title="Location" text="{Warehouse A}"/>
                        <ObjectAttribute title="Halway" text="23L"/>
                        <ObjectAttribute title="Rack" text="34"/>
                    </layout:VerticalLayout>

                    <layout:VerticalLayout>
                        <ObjectAttribute title="Price"/>
                        <ObjectAttribute text="100.000.000 EUR" />
                    </layout:VerticalLayout>

                </layout:HorizontalLayout>
            </f:DynamicPageHeader>
        </f:header>

        <f:content>
            <VBox>
                <IconTabBar id="iconTabBar" class="sapUiResponsiveContentPadding" >
                    <items>
                        <IconTabFilter icon="sap-icon://shipping-status">

                        </IconTabFilter>

                        <IconTabFilter icon="sap-icon://employee">

                        </IconTabFilter>
                    </items>
                </IconTabBar>

                <Table
                    id="idProductsTable"
                    sticky="HeaderToolbar,ColumnHeaders"
                    inset="false"
                    items="{orders>/Order_Details/results}"
                    class="sapFDynamicPageAlignContent"
                    width="auto">
                    <headerToolbar>
                        <Toolbar>
                            <Title text="{= 'Line Items (' + ${orders>/Order_Details/results/length} + ')' }" level="H2"/>
                        </Toolbar>
                    </headerToolbar>
                    <columns>
                        <Column width="12em">
                            <Text text="Product" />
                        </Column>
                        <Column minScreenWidth="Tablet" demandPopin="true" hAlign="Center">
                            <Text text="Unit Price" />
                        </Column>
                        <Column minScreenWidth="Tablet" demandPopin="true" hAlign="Center">
                            <Text text="Quantity" />
                        </Column>
                        <Column hAlign="End">
                            <Text text="Total" />
                        </Column>
                    </columns>
                    <items>
                        <ColumnListItem>
                            <cells>
                                <ObjectIdentifier title="{orders>Product/ProductName}" />
                                <ObjectNumber
                                    number="{
                                        path: 'orders>UnitPrice'
                                    }"
                                    unit="EUR" />
                                <Text text="{orders>Quantity}" />
                                <ObjectNumber
                                    number='{
                                        "parts": [
                                            {"path": "orders>UnitPrice"},
                                            {"path": "orders>Quantity"}
                                        ],
                                        "formatter": ".formatter.setTotal"
                                    }' 
                                    unit="EUR" />
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
            </VBox>
        </f:content>

    </f:DynamicPage>
</mvc:xml>
